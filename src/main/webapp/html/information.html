<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>我的通知悬浮框</title>

    <link href="../css/hoverPane.css" rel="stylesheet" type="text/css">
    <script src="../js/jquery-3.5.1.js"></script>
    <script src="../js/debounce.js"></script>
</head>

<body>
    <div class="hoverBox">
        <div class="title ">消息通知</div>

        <div class="mode_selection">

            <span class="mode active" id="hoverBox_interest">动态通知</span>
            <span class="mode" id="hoverBox_fans">私信通知</span>
            <span class="activeLine toLeft"></span>
        </div>
        <!-- 内容框 -->
        <div class="contentBox_information">
            <div class="itemList_box">
                <ul class="itemList">

                    <li class="item">
                        <img src="../../../../img/user_profile/use1 (1).jpg">
                        <svg class="info_point" class="icon" height="10" p-id="12380" t="1602330426902" version="1.1" viewBox="0 0 1024 1024" width="10" xmlns="http://www.w3.org/2000/svg">
                        <path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#E6A23C"
                              p-id="12381"></path>
                    </svg>
                        <span class="userName itemTitle">用户名</span>
                        <span class="item_info">为了提供更好的创作体验，知乎创作中心进行了多方面的升级。</span>
                        <span class="time">21:53</span>
                    </li>
                    <li class="item">
                        <img src="../../../../img/user_profile/use1 (1).jpg">
                        <svg class="info_point" class="icon" height="10" p-id="12380" t="1602330426902" version="1.1" viewBox="0 0 1024 1024" width="10" xmlns="http://www.w3.org/2000/svg">
                        <path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#E6A23C"
                              p-id="12381"></path>
                    </svg>
                        <span class="userName itemTitle">用户名</span>
                        <span class="item_info">为了提供更好的创作体验，知乎创作中心进行了多方面的升级。</span>
                        <span class="time">21:53</span>
                    </li>
                    <li class="item">
                        <img src="../../../../img/user_profile/use1 (1).jpg">
                        <svg class="info_point" class="icon" height="10" p-id="12380" t="1602330426902" version="1.1" viewBox="0 0 1024 1024" width="10" xmlns="http://www.w3.org/2000/svg">
                        <path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#E6A23C"
                              p-id="12381"></path>
                    </svg>
                        <span class="userName itemTitle">用户名</span>
                        <span class="item_info">为了提供更好的创作体验，知乎创作中心进行了多方面的升级。</span>
                        <span class="time">21:53</span>
                    </li>
                    <li class="item">
                        <img src="../../../../img/user_profile/use1 (1).jpg">
                        <svg class="info_point" class="icon" height="10" p-id="12380" t="1602330426902" version="1.1" viewBox="0 0 1024 1024" width="10" xmlns="http://www.w3.org/2000/svg">
                        <path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#E6A23C"
                              p-id="12381"></path>
                    </svg>
                        <span class="userName itemTitle">用户名</span>
                        <span class="item_info">为了提供更好的创作体验，知乎创作中心进行了多方面的升级。</span>
                        <span class="time">21:53</span>
                    </li>
                    <li class="item">
                        <img src="../../../../img/user_profile/use1 (1).jpg">
                        <svg class="info_point" class="icon" height="10" p-id="12380" t="1602330426902" version="1.1" viewBox="0 0 1024 1024" width="10" xmlns="http://www.w3.org/2000/svg">
                        <path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#E6A23C"
                              p-id="12381"></path>
                    </svg>
                        <span class="userName itemTitle">用户名</span>
                        <span class="item_info">为了提供更好的创作体验，知乎创作中心进行了多方面的升级。</span>
                        <span class="time">21:53</span>
                    </li>
                    <li class="item">
                        <img src="../../../../img/user_profile/use1 (1).jpg">
                        <svg class="info_point" class="icon" height="10" p-id="12380" t="1602330426902" version="1.1" viewBox="0 0 1024 1024" width="10" xmlns="http://www.w3.org/2000/svg">
                        <path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#E6A23C"
                              p-id="12381"></path>
                    </svg>
                        <span class="userName itemTitle">用户名</span>
                        <span class="item_info">为了提供更好的创作体验，知乎创作中心进行了多方面的升级。</span>
                        <span class="time">21:53</span>
                    </li>

                </ul>
            </div>
        </div>


        <div class="foot">
            <svg class="clearAllPoint" height="16" title="一键已读" viewBox="0 0 1024 1024" width="16">
            <path d="M965.12 286.293333H657.493333V108.8C657.493333 48.64 605.013333 0 540.586667 0H482.56C418.56 0.426667 366.506667 49.066667 366.506667 108.8V285.866667H58.453333C26.026667 285.866667 0 310.613333 0 341.333333v176.213334c0 30.293333 26.453333 55.466667 58.453333 55.466666v253.866667c-0.426667 46.933333-6.826667 93.44-18.346666 135.253333l-0.853334 6.4c0 30.72 26.453333 55.466667 58.453334 55.466667H926.293333c30.293333 0 57.6-22.613333 59.733334-49.493333l-0.853334-7.253334c-12.8-46.933333-19.2-96-19.626666-145.066666v-248.32l19.2-3.84c22.613333-7.68 38.4-28.16 38.4-52.053334V341.76c0.426667-30.72-26.026667-55.466667-58.026667-55.466667z m-210.773333 650.24V733.866667c0-18.346667-15.786667-33.28-34.56-33.28h-9.813334c-19.2 0-34.56 14.933333-34.56 33.28v202.666666h-113.92V733.866667c0-18.346667-15.786667-33.28-34.56-33.28h-9.813333c-19.2 0-34.56 14.933333-34.56 33.28v202.666666H359.253333V733.866667c0-18.346667-15.786667-33.28-34.56-33.28h-9.813333c-19.2 0-34.56 14.933333-34.56 33.28v202.666666l-146.346667 2.56c8.96-34.986667 13.226667-70.826667 13.226667-107.093333v-259.413333h729.173333V836.266667c0 33.706667 3.84 67.84 11.52 99.84h-133.546666zM931.84 486.4H91.733333V372.906667H456.96v-251.733334c0-27.733333 33.28-30.72 47.786667-30.72h16.213333c14.506667 0 47.786667 2.986667 47.786667 30.72v253.866667h363.093333V486.4z"
                  fill="#bfbfbf" p-id="12613"></path>
        </svg>
        </div>
    </div>
    <script id="item_template" type="text/html">
        <li class="item">
            <a class="img_link" href="#" title="进入主页">
                <img src="{{}}">
            </a>
            <span class="userName">{{userName}}</span>
            <span class="status">{{status}}</span>
            <div class="sex">
                {{sex}}
                <!-- 参数为一个标签 -->
                <!-- <svg class="male " t="1602171820438" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3642" width="23" height="23"><path d="M262.144 419.84C194.56 270.336 286.72 106.496 407.552 18.432c-2.048 16.384-8.192 49.152-10.24 67.584 32.768-20.48 65.536-40.96 100.352-63.488 18.432 4.096 38.912 6.144 57.344 10.24 63.488 65.536 180.224 69.632 215.04 165.888 34.816 114.688-26.624 225.28-61.44 333.824-20.48 69.632-67.584 135.168-137.216 161.792-65.536 26.624-143.36 4.096-192.512-45.056-63.488-65.536-67.584-159.744-116.736-229.376zM358.4 307.2c-79.872 118.784-36.864 309.248 100.352 364.544 124.928 43.008 233.472-81.92 241.664-198.656 16.384-61.44-26.624-114.688-51.2-167.936-94.208 40.96-196.608 28.672-290.816 2.048z" p-id="3643" fill="#17abe3"></path><path d="M133.12 788.48c61.44-59.392 147.456-81.92 227.328-102.4-4.096 118.784 20.48 245.76 114.688 325.632 12.288-88.064 20.48-178.176 18.432-268.288 12.288 0 38.912 0 51.2 2.048 0 88.064 12.288 174.08 30.72 258.048 71.68-88.064 110.592-200.704 88.064-313.344 71.68 26.624 151.552 43.008 212.992 90.122 47.104 45.056 51.2 116.736 63.488 176.128V1024H81.92v-96.256c8.192-49.152 14.336-102.4 51.2-139.264z" p-id="3644" fill="#17abe3"></path></svg>
            <svg class="female on" t="1602171713920"  viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3272" width="23" height="23"><path d="M373.793 306.073a373.53 373.53 0 0 0 283.884-6.724 373.53 373.53 0 0 1 41.089 185.272c-8.965 128.495-118.783 228.601-233.83 188.26s-158.378-259.978-91.143-366.808zM695.03 701.27a705.227 705.227 0 0 0 144.183 46.318c86.66 20.918 153.895 173.318 149.413 275.666H32.386s0-224.119 113.553-261.472a1114.617 1114.617 0 0 0 185.272-64.994s-11.206 241.3 114.3 233.83c40.342 0 67.983-93.383 67.983-93.383s50.053 93.383 91.889 93.383c79.935 0 88.9-198.718 89.647-229.348zM196.74 530.192a84.418 84.418 0 0 0 19.423 100.106C258 669.145 379.77 656.445 379.77 656.445a149.412 149.412 0 0 1-48.56 40.342l182.284 117.288L692.79 699.028c-50.8-27.64-28.388-44.077-28.388-44.077a313.02 313.02 0 0 0 134.47-4.482c74.707-25.4 34.366-127.748 34.366-127.748 49.306-5.23 24.653-61.259-11.953-104.589S763.013 196.255 704.742 86.437C656.93 7.995 530.677 0.524 504.53 0.524a194.236 194.236 0 0 0-158.377 63.5C281.906 132.007 251.276 299.35 243.06 350.15S168.35 481.633 168.35 499.562s28.39 30.63 28.39 30.63z" p-id="3273" fill="#e8989a"></path></svg> -->
            </div>

            <span class="school_info">{{school_info}}</span>
            <!-- 是否关注 -->
            <div class="subscribe" nextAction="{{action}}" title="关注">
                <!--红 #d6204b -->
                <svg t="1602172191268" class="do_subscribe" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3875" width="23" height="23">
                <path d="M513.536 239.104S441.856 87.04 280.064 87.04C102.912 87.04 10.24 235.52 10.24 384c0 246.784 503.296 552.96 503.296 552.96S1013.76 633.856 1013.76 384c0-151.552-95.744-296.96-266.752-296.96-170.496 0-233.472 152.064-233.472 152.064z"
                      p-id="3876" fill="#bfbfbf"></path>
            </svg>
            </div>
            <!-- 私信 -->
            <div class="sendText" title="私信">
                <!-- #17abe3 -->
                <svg t="1602172441453" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4482" width="23" height="23">
                <path d="M935.724138 494.344828c0 204.8-188.910345 370.758621-423.724138 370.75862-67.089655 0-130.648276-14.124138-187.144828-38.841379-35.310345-14.124138-157.131034 60.027586-185.37931 38.841379-28.248276-21.186207 38.841379-141.241379 17.655172-167.724138C122.993103 639.117241 88.275862 568.496552 88.275862 494.344828 88.275862 289.544828 277.186207 123.586207 512 123.586207s423.724138 165.958621 423.724138 370.758621z m-605.572414 5.296551c0 14.124138 7.062069 26.482759 19.42069 33.544828s26.482759 7.062069 38.841379 0c12.358621-7.062069 19.42069-19.42069 19.42069-33.544828 0-14.124138-7.062069-26.482759-19.42069-33.544827-12.358621-7.062069-26.482759-7.062069-38.841379 0-12.358621 7.062069-19.42069 19.42069-19.42069 33.544827z m155.365517 0c0 14.124138 7.062069 26.482759 19.42069 33.544828 12.358621 7.062069 26.482759 7.062069 38.841379 0 12.358621-7.062069 19.42069-19.42069 19.42069-33.544828 0-14.124138-7.062069-26.482759-19.42069-33.544827-12.358621-7.062069-26.482759-7.062069-38.841379 0-12.358621 7.062069-19.42069 19.42069-19.42069 33.544827z m153.6 0c0 14.124138 7.062069 26.482759 19.42069 33.544828 12.358621 7.062069 26.482759 7.062069 38.841379 0 12.358621-7.062069 19.42069-19.42069 19.42069-33.544828 0-14.124138-7.062069-26.482759-19.42069-33.544827-12.358621-7.062069-26.482759-7.062069-38.841379 0-12.358621 7.062069-19.42069 19.42069-19.42069 33.544827z"
                      fill="#bfbfbf" p-id="4483"></path>
            </svg>
            </div>
        </li>
    </script>
    <script>
        var a = {
                "last": "无效参数",
                "next": "是否有下一页",
                "totalPage": "总页数",
                "nowPosition": "现在的页数",
                "dataList": [{
                    "userName": "用户名",
                    "userType": "用户类型", // student / teacher 要自己判断
                    "sex": "性别",
                    "collage": "院校",
                    "major": "专业",
                    "mutual": "是否相互关注"
                }],
                "page_SIZE": "页面大小"
            }
            //刚打开悬浮板，就发送
            //切换为我的回答
            //去右边
        $('#hoverBox_fans').click(function() {
                $(this).addClass("active");
                $("#hoverBox_interest").removeClass("active");
                $('.hoverBox .activeLine').addClass("toRight");
                $('.hoverBox .activeLine').removeClass("toLeft");
                $('.hoverBox .title').html($(this).html())
                    //发送请求
            })
            //去左边
        $('#hoverBox_interest').click(function() {
            $(this).addClass("active");
            $("#hoverBox_fans").removeClass("active");
            $('.hoverBox .activeLine').addClass("toLeft");
            $('.hoverBox .activeLine').removeClass("toRight");
            $('.hoverBox .title').html($(this).html())
                //发送请求
        })

        //还没关注之前，点击后发送关注请求，并且成功后把状态变成关注，点亮
        //如果当前是已关注，title为取消关注

        // 点击关注按钮，并且是当前状态为turnON ，就发送请求发送关注，如果为turnOff就发送取消关注请求
        $('.hoverBox .contentBox_subscribe .item .subscribe').click(function() {
            if ($(this).attr("nextAction") == 'turnOn') {
                //发送关注请求
                $(this).find('svg path').css("fill", "#d6204b");
                $(this).attr({
                    "nextAction": "turnOff",
                    "title": "取消关注"
                });
            } else {
                $(this).find('svg path').css("fill", "#bfbfbf");
                $(this).attr({
                    "nextAction": "turnOn",
                    "title": "关注"
                });
            }
        })

        var page = 1; //可以写在list的属性中
        var num = 6;
        //用到节流防抖，先不做
        $('.itemList_box').scroll(debounce(getData, 300));

        //获取数据函数
        function getData() {
            //滚动条到顶部的高度
            var scrollTop = Math.ceil($(this).scrollTop());
            //窗口高度
            var curHeight = $(this).height();
            //整个文档高度
            var totalHeight = $('.itemList').height();
            //滚动条到底
            console.log("拖拽滚动条");
            if (scrollTop + curHeight > totalHeight) {
                page++;
                console.log(page)
                console.log("到达了底部")
                    // getData();//获取数据的方法
                    //console.log(123);
            }
        }
    </script>


</body>

</html>